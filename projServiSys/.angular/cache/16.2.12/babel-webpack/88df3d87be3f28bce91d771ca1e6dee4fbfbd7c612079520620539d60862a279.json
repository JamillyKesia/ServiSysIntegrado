{"ast":null,"code":"import { switchMap, take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/account.service\";\nexport class JwtInterceptor {\n  constructor(accountService) {\n    this.accountService = accountService;\n  }\n  intercept(request, next) {\n    return this.accountService.currentUser$.pipe(take(1), switchMap(currentUser => {\n      if (currentUser) {\n        request = request.clone({\n          setHeaders: {\n            Authorization: `Bearer ${currentUser.token}`\n          }\n        });\n      }\n      return next.handle(request);\n    }));\n  }\n  static #_ = this.ɵfac = function JwtInterceptor_Factory(t) {\n    return new (t || JwtInterceptor)(i0.ɵɵinject(i1.AccountService));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: JwtInterceptor,\n    factory: JwtInterceptor.ɵfac\n  });\n}","map":{"version":3,"names":["switchMap","take","JwtInterceptor","constructor","accountService","intercept","request","next","currentUser$","pipe","currentUser","clone","setHeaders","Authorization","token","handle","_","i0","ɵɵinject","i1","AccountService","_2","factory","ɵfac"],"sources":["C:\\Users\\jamil\\SSintegrado\\projServiSys\\src\\app\\interceptors\\jwt.interceptor.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { switchMap, take } from 'rxjs/operators';\nimport { AccountService } from '../services/account.service';\nimport { User } from '../models/identity/user';\n\n@Injectable()\nexport class JwtInterceptor implements HttpInterceptor {\n\n  constructor(private accountService: AccountService) {}\n\n  intercept(request: HttpRequest<unknown>, next: HttpHandler): Observable<HttpEvent<unknown>> {\n    return this.accountService.currentUser$.pipe(\n      take(1),\n      switchMap(currentUser => {\n        if (currentUser) {\n          request = request.clone({\n            setHeaders: {\n              Authorization: `Bearer ${currentUser.token}`\n            }\n          });\n        }\n        return next.handle(request);\n      })\n    );\n  }\n}\n"],"mappings":"AAQA,SAASA,SAAS,EAAEC,IAAI,QAAQ,gBAAgB;;;AAKhD,OAAM,MAAOC,cAAc;EAEzBC,YAAoBC,cAA8B;IAA9B,KAAAA,cAAc,GAAdA,cAAc;EAAmB;EAErDC,SAASA,CAACC,OAA6B,EAAEC,IAAiB;IACxD,OAAO,IAAI,CAACH,cAAc,CAACI,YAAY,CAACC,IAAI,CAC1CR,IAAI,CAAC,CAAC,CAAC,EACPD,SAAS,CAACU,WAAW,IAAG;MACtB,IAAIA,WAAW,EAAE;QACfJ,OAAO,GAAGA,OAAO,CAACK,KAAK,CAAC;UACtBC,UAAU,EAAE;YACVC,aAAa,EAAE,UAAUH,WAAW,CAACI,KAAK;;SAE7C,CAAC;;MAEJ,OAAOP,IAAI,CAACQ,MAAM,CAACT,OAAO,CAAC;IAC7B,CAAC,CAAC,CACH;EACH;EAAC,QAAAU,CAAA,G;qBAlBUd,cAAc,EAAAe,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,cAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAdnB,cAAc;IAAAoB,OAAA,EAAdpB,cAAc,CAAAqB;EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}